"use strict";(self.webpackChunkbluecaller_cms=self.webpackChunkbluecaller_cms||[]).push([[4004],{4414:(e,s,n)=>{n.d(s,{A:()=>t});var i=n(32115);const t=function(e){var s,n,t;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/signin";if(!e)return null;const l=(null===e||void 0===e||null===(s=e.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||(null===e||void 0===e?void 0:e.message)||"Something went wrong!";401===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)?(i.oR.error(l,{toastId:"auth-error"}),setTimeout(()=>{window.location.href=o},3e3)):i.oR.error(l,{toastId:"error"})}},54004:(e,s,n)=>{n.r(s),n.d(s,{default:()=>u});var i=n(65043),t=n(99909),o=n(23759),l=n(32115),d=n(4414),r=n(65919),a=n(70579);const u=function(){const[e,s]=(0,i.useState)([]),[n,u]=(0,i.useState)(null),[c,v]=(0,i.useState)(!1);(0,i.useEffect)(()=>{const e=new t.ClientJS;u(e.getFingerprint())},[]),(0,i.useEffect)(()=>{h()},[]);const h=async()=>{try{v(!0);const n=await r.A.get("api/user/sessions");var e;if(n.data)s((null===(e=n.data)||void 0===e?void 0:e.sessions)||[])}catch(n){(0,d.A)(n)}finally{v(!1)}};return c?(0,a.jsx)("h4",{className:"d-flex align-items-center justify-content-center",style:{minHeight:"40vh"},children:"Loading ...."}):(0,a.jsx)("div",{children:null!==e&&void 0!==e&&e.length?null===e||void 0===e?void 0:e.map(e=>{var s,i;return(0,a.jsxs)("div",{className:"d-flex text-dark border border-dark/50 p-2 rounded justify-content-between align-items-center mb-3",children:[(0,a.jsxs)("div",{children:[parseInt(null===e||void 0===e?void 0:e.deviceId)===parseInt(n)&&(0,a.jsx)("p",{className:"badge bg-success",children:"Current"}),(0,a.jsxs)("p",{children:["Google ",null===e||void 0===e||null===(s=e.session)||void 0===s?void 0:s.browser," ",null===e||void 0===e?void 0:e.deviceId," (",null===e||void 0===e||null===(i=e.session)||void 0===i?void 0:i.os,") \xa0"]}),(0,a.jsxs)("p",{children:["Last Active: ",(0,o.GP)(new Date(null===e||void 0===e?void 0:e.createdAt),"dd MMMM yyyy, h.mm a")]})]}),(0,a.jsx)("button",{onClick:()=>(async e=>{try{(await r.A.delete(`api/user/session/${e}`)).data.message&&h()}catch(i){var s,n;l.oR.error((null===i||void 0===i||null===(s=i.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||(null===i||void 0===i?void 0:i.message))}})(null===e||void 0===e?void 0:e.deviceId),className:"btn btn-danger btn-sm",type:"button",children:"Logout"})]},null===e||void 0===e?void 0:e.deviceId)}):(0,a.jsx)("p",{children:"No active sessions"})})}}}]);
//# sourceMappingURL=4004.722c0682.chunk.js.map