"use strict";(self.webpackChunkbluecaller_cms=self.webpackChunkbluecaller_cms||[]).push([[4009],{21506:(e,t,s)=>{s.r(t),s.d(t,{default:()=>A});var l=s(65043),a=s(61072),n=s(78602),i=s(38628),r=s(55211),o=s(47994),c=s(14282),d=s(64196),x=s(6798),h=s(83910),u=s(97929),p=s(73216),m=s(35475),v=s(86213),j=s(17542),f=s(42003),b=(s(47915),s(27149)),g=s(2309),y=s.n(g),N=s(70579);function A(){var e,t;const s=(0,p.Zp)(),g=(0,p.zy)();let[A,w]=(0,l.useState)([]);const[C,S]=(0,l.useState)(null),[k,z]=(0,l.useState)((null===g||void 0===g||null===(e=g.state)||void 0===e?void 0:e.page)||1),[R,O]=(0,l.useState)((null===g||void 0===g||null===(t=g.state)||void 0===t?void 0:t.limit)||10),[_,L]=(0,l.useState)(""),[P,T]=(0,l.useState)(),[E,I]=(0,l.useState)(null),[F,H]=(0,l.useState)(!1);let[B,D]=(0,l.useState)(!1),[$,M]=(0,l.useState)(!1),[V,U]=(0,l.useState)(!1),[G,W]=(0,l.useState)(""),[Z,q]=(0,l.useState)(0);function J(){U(!0),v.A.get(j.f.get.reports+`?page=${k}&limit=${R}&q=${_}&is_delete=no`).then(e=>{var t,s,l,a,n,i,r,o;console.log("Report data:",e),w(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.docs),S(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.totalPages),W(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.totalDocs),z(null===e||void 0===e||null===(r=e.data)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.page)}).finally(()=>{U(!1)})}(0,l.useEffect)(()=>{J()},[k,R,_]);const K=()=>{H(!1)},Q=e=>{e.preventDefault();const t={status:e.target.value};v.A.post(j.f.post.addStatus+"/"+P+"?type=report",t).then(e=>{var t;console.log(null===(t=e.data)||void 0===t?void 0:t.status),D(!0),setTimeout(()=>{D(!1),J()},2e3)})},X=Math.ceil(C/5),Y=5*Z+1,ee=Math.min(Y+5-1,C),te=[];for(let l=Y;l<=ee;l++)te.push(l);const se=k*R,le=se-R+1,ae=Math.min(se,G);let[ne,ie]=(0,l.useState)(!1),[re,oe]=(0,l.useState)(!1),[ce,de]=(0,l.useState)(!1),[xe,he]=(0,l.useState)(null),[ue,pe]=(0,l.useState)(!1);return(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{className:"row position-relative",children:(0,N.jsx)("div",{className:"col-3 offset-9 position-fixed z-3",style:{top:"60px",right:"20px"},children:B?(0,N.jsx)("b",{children:(0,N.jsx)(f.A,{message:"Status update successfully."})}):null})}),(0,N.jsx)("div",{className:"row position-relative",children:(0,N.jsx)("div",{className:"col-3 offset-9 position-fixed z-3",style:{top:"60px",right:"20px"},children:$?(0,N.jsx)("b",{children:(0,N.jsx)(f.A,{message:"Reason delete successfully."})}):null})}),(0,N.jsx)("div",{className:"row position-relative",children:(0,N.jsx)("div",{className:"col-3 offset-9 position-fixed z-3",style:{top:"60px",right:"20px"},children:ne?(0,N.jsx)("b",{children:(0,N.jsx)(f.A,{message:"Please select a CSV file to import! \ud83d\ude25"})}):null})}),(0,N.jsx)("div",{className:"row position-relative",children:(0,N.jsx)("div",{className:"col-3 offset-9 position-fixed z-3",style:{top:"60px",right:"20px"},children:re?(0,N.jsx)("b",{children:(0,N.jsx)(f.A,{message:"File imported successfully! \ud83d\ude0d"})}):null})}),(0,N.jsx)("div",{className:"row position-relative",children:(0,N.jsx)("div",{className:"col-4 offset-8 position-fixed z-3",style:{top:"60px",right:"20px"},children:ce?(0,N.jsx)("b",{children:(0,N.jsx)(f.A,{message:"Please check your CSV file repeated data is not allow !"})}):null})}),(0,N.jsx)("div",{className:"row pb-3",children:(0,N.jsx)("div",{className:"col-2 offset-10",children:(0,N.jsxs)("div",{className:"d-flex justify-content-evenly align-items-center",children:[(0,N.jsx)("div",{className:"text-dark",children:"Limit :"}),(0,N.jsx)("div",{children:(0,N.jsxs)("select",{className:"btn btn-light p-1",style:{border:"1px solid #10446c"},onChange:e=>{O(e.target.value),z(1)},value:R,children:[(0,N.jsx)("option",{value:"10",children:"10"}),(0,N.jsx)("option",{value:"20",children:"20"}),(0,N.jsx)("option",{value:"50",children:"50"}),(0,N.jsx)("option",{value:"100",children:"100"}),(0,N.jsx)("option",{value:"500",children:"500"})]})})]})})}),(0,N.jsxs)(a.A,{className:"mainReport animate__animated animate__fadeInRight",children:[(0,N.jsx)(n.A,{children:(0,N.jsxs)(i.A,{style:{borderRadius:15,border:"1px solid #10446c"},children:[(0,N.jsxs)(i.A.Header,{style:{borderBottom:"1px dashed #10446c"},children:[(0,N.jsxs)(a.A,{children:[(0,N.jsx)("div",{className:"col-7 pt-1",children:(0,N.jsxs)(i.A.Title,{as:"h4",children:[(0,N.jsx)(b.GB0,{style:{color:"#10446c",marginRight:"8px",fontSize:"40px",padding:"5px",backgroundColor:"#f1faee",borderRadius:"50%",border:"2px dashed #10446c"}}),(0,N.jsx)("b",{style:{color:"#10446c"},children:"Report Table"})]})}),(0,N.jsx)("div",{className:"col-3 d-flex",children:(0,N.jsx)(r.A.Group,{className:"mb-3",as:n.A,controlId:"exampleForm.ControlSelect1",children:(0,N.jsx)(o.A,{children:(0,N.jsx)(r.A.Control,{className:"bg-white py-2 ",style:{border:"1px solid #10446c"},size:"sm",type:"text",onChange:e=>{L(e.target.value),z(1)},placeholder:" Search"})})})}),(0,N.jsx)("div",{className:"col-2 d-flex",children:(0,N.jsx)("div",{children:(0,N.jsx)(m.N_,{to:"/report/addReport",children:(0,N.jsxs)(c.A,{style:{backgroundColor:" #10446c",border:"none"},size:"sm",children:["Add ",(0,N.jsx)(h.g,{icon:u.vkJ})]})})})})]}),(0,N.jsxs)(a.A,{children:[(0,N.jsxs)("div",{className:"col-4 pt-2",children:[(0,N.jsx)(r.A.Label,{style:{fontWeight:"bold",color:" #10446c"},children:"Select CSV File"}),(0,N.jsx)("input",{type:"file",accept:".csv",style:{border:"1px solid  #10446c",borderRadius:4},onChange:e=>{he(e.target.files[0])}})]}),(0,N.jsx)("div",{className:"col-2 pt-2",children:(0,N.jsx)("button",{className:"btn  btn-sm btn-danger mt-4",onClick:async()=>{if(!xe)return ie(!0),void setTimeout(()=>{ie(!1)},2e3);const e=new FormData;e.append("Report",xe);try{pe(!0);const t=await v.A.post(j.f.post.reportImport,e,{headers:{"Content-Type":"multipart/form-data"}});console.log(t.data.message||"File imported successfully!"),oe(!0),setTimeout(()=>{oe(!1)},2e3)}catch(t){de(!0),setTimeout(()=>{de(!1)},3e3)}finally{pe(!1)}},disabled:ue,children:ue?"Importing...":"Import"})})]})]}),(0,N.jsxs)(i.A.Body,{children:[V?(0,N.jsxs)("div",{className:"text-center",children:[(0,N.jsx)(y(),{color:"#10446c"}),(0,N.jsx)("h6",{className:"text-danger mt-3",children:"Loading....."})]}):0===(null===A||void 0===A?void 0:A.length)?(0,N.jsx)("div",{className:"text-center pt-3 pb-3",children:(0,N.jsx)("h6",{className:"text-danger",children:"No data available ! \ud83d\ude25"})}):(0,N.jsxs)(d.A,{responsive:!0,hover:!0,bordered:!0,children:[(0,N.jsx)("thead",{className:"tableHeader",children:(0,N.jsxs)("tr",{className:"text-center",children:[(0,N.jsx)("th",{children:"ID"}),(0,N.jsx)("th",{children:"Reason"}),(0,N.jsx)("th",{children:"Status"}),(0,N.jsx)("th",{children:"Action"})]})}),A.map((e,t)=>{var s;return(0,N.jsx)("tbody",{className:"tableBody",children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"text-center",children:t+1}),(0,N.jsx)("td",{children:null===e||void 0===e?void 0:e.reason}),(0,N.jsx)("td",{className:"text-center",children:(0,N.jsxs)("select",{className:"btn btn-light p-1 dropdown-toggle",style:{border:"1px solid #10446c"},onChange:Q,onClick:()=>T(e._id),value:null===e||void 0===e?void 0:e.status,children:[(0,N.jsx)("option",{value:"active",children:"Active"}),(0,N.jsx)("option",{value:"draft",children:"In-Active"})]})}),(0,N.jsxs)("td",{className:"text-center",children:[(0,N.jsx)(m.N_,{to:(null===g||void 0===g||null===(s=g.state)||void 0===s?void 0:s.page)||1,children:(0,N.jsx)(c.A,{variant:"danger",size:"sm",onClick:()=>{H(!0),I(e._id)},children:(0,N.jsx)(h.g,{icon:u.yLS})})}),(0,N.jsx)(m.N_,{to:"/report/editReport/"+e._id,state:{page:k,limit:R},className:"text-white",children:(0,N.jsx)(c.A,{variant:"success",size:"sm",children:(0,N.jsx)(h.g,{icon:u.MT7})})})]})]})},t)})]}),(0,N.jsx)("div",{className:"container ",children:(0,N.jsxs)("div",{className:"row d-flex justify-content-center",children:[(0,N.jsx)("div",{className:"col-6 pt-3 ",children:(0,N.jsx)("div",{style:{borderLeft:"5px solid #10446c",paddingLeft:"5px"},children:(0,N.jsxs)("h5",{style:{color:"#10446c",fontSize:"16px"},children:["Showing ",le," to ",ae," of ",G," entries."]})})}),(0,N.jsxs)("div",{className:"col-6 pt-3 text-center ",children:[(0,N.jsx)(c.A,{onClick:()=>{Z>0&&q(Z-1)},type:"button",className:"btn btn-sm",style:{backgroundColor:"#10446c",border:"none"},disabled:0===Z,children:"<"}),te.map(e=>(0,N.jsx)("button",{type:"button",className:k===e?"btn btn-sm btn-primary rounded-circle":"btn btn-sm btn-dark",onClick:()=>{return z(t=e),void s(g.pathname,{replace:!0,state:t});var t},children:e},e)),(0,N.jsx)(c.A,{onClick:()=>{Z<X-1&&q(Z+1)},type:"button",className:"btn btn-sm ",style:{backgroundColor:"#10446c",border:"none"},disabled:Z===X-1,children:">"})]})]})})]})]})}),(0,N.jsxs)(x.A,{show:F,onHide:K,children:[(0,N.jsx)(x.A.Header,{closeButton:!0,children:(0,N.jsx)(x.A.Title,{className:"text-danger",children:"Alert"})}),(0,N.jsx)(x.A.Body,{children:"Are you sure want to delete the reason ?"}),(0,N.jsxs)(x.A.Footer,{children:[(0,N.jsx)(c.A,{variant:"dark",size:"sm",onClick:K,children:"Cancel"}),(0,N.jsx)(c.A,{variant:"danger",size:"sm",onClick:()=>{K(),v.A.delete(j.f.delete.deleteReason+E).then(()=>{M(!0),setTimeout(()=>{M(!1),J()},2e3)})},children:"Delete"})]})]})]})]})}},42003:(e,t,s)=>{s.d(t,{A:()=>i});var l=s(65043),a=s(91719),n=s(70579);const i=e=>(0,n.jsx)(l.Fragment,{children:(0,n.jsxs)(a.A,{variant:"warning",children:[e.message,(0,n.jsx)(a.A.Link,{href:e.link,target:"_blank",className:"float-right"})]})})},47915:()=>{},66688:(e,t,s)=>{s.d(t,{k5:()=>c});var l=s(65043),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=l.createContext&&l.createContext(a),i=function(){return i=Object.assign||function(e){for(var t,s=1,l=arguments.length;s<l;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},r=function(e,t){var s={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(s[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(l=Object.getOwnPropertySymbols(e);a<l.length;a++)t.indexOf(l[a])<0&&Object.prototype.propertyIsEnumerable.call(e,l[a])&&(s[l[a]]=e[l[a]])}return s};function o(e){return e&&e.map(function(e,t){return l.createElement(e.tag,i({key:t},e.attr),o(e.child))})}function c(e){return function(t){return l.createElement(d,i({attr:i({},e.attr)},t),o(e.child))}}function d(e){var t=function(t){var s,a=e.attr,n=e.size,o=e.title,c=r(e,["attr","size","title"]),d=n||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),l.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,c,{className:s,style:i(i({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),o&&l.createElement("title",null,o),e.children)};return void 0!==n?l.createElement(n.Consumer,null,function(e){return t(e)}):t(a)}},91719:(e,t,s)=>{s.d(t,{A:()=>g});var l=s(98139),a=s.n(l),n=s(65043),i=s(97121),r=s(71456),o=s(67852),c=s(4488),d=s(70579);const x=(0,c.A)("h4");x.displayName="DivStyledAsH4";const h=n.forwardRef((e,t)=>{let{className:s,bsPrefix:l,as:n=x,...i}=e;return l=(0,o.oU)(l,"alert-heading"),(0,d.jsx)(n,{ref:t,className:a()(s,l),...i})});h.displayName="AlertHeading";const u=h;var p=s(87071);const m=n.forwardRef((e,t)=>{let{className:s,bsPrefix:l,as:n=p.A,...i}=e;return l=(0,o.oU)(l,"alert-link"),(0,d.jsx)(n,{ref:t,className:a()(s,l),...i})});m.displayName="AlertLink";const v=m;var j=s(18072),f=s(85632);const b=n.forwardRef((e,t)=>{const{bsPrefix:s,show:l=!0,closeLabel:n="Close alert",closeVariant:c,className:x,children:h,variant:u="primary",onClose:p,dismissible:m,transition:v=j.A,...b}=(0,i.Zw)(e,{show:"onClose"}),g=(0,o.oU)(s,"alert"),y=(0,r.A)(e=>{p&&p(!1,e)}),N=!0===v?j.A:v,A=(0,d.jsxs)("div",{role:"alert",...N?void 0:b,ref:t,className:a()(x,g,u&&`${g}-${u}`,m&&`${g}-dismissible`),children:[m&&(0,d.jsx)(f.A,{onClick:y,"aria-label":n,variant:c}),h]});return N?(0,d.jsx)(N,{unmountOnExit:!0,...b,ref:void 0,in:l,children:A}):l?A:null});b.displayName="Alert";const g=Object.assign(b,{Link:v,Heading:u})}}]);
//# sourceMappingURL=4009.cd18e42b.chunk.js.map